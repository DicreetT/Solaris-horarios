@import "tailwindcss";

@theme {
  --color-primary: var(--primary);
  --color-primary-dark: var(--primary-dark);
  --color-primary-light: var(--primary-light);
  --color-bg: var(--bg);
  --color-card: var(--card);
  --color-border: var(--border);
  --color-text: var(--text);
  --color-sidebar: var(--sidebar-bg);

  /* Layout variables */
  --sidebar-width: 240px;
  --sidebar-collapsed-width: 64px;
  --header-height: 64px;
}

/* Base Themes */
:root {
  --primary: #9333EA;
  --primary-dark: #7E22CE;
  --primary-light: #A855F7;
  --bg: #F8F7FF;
  --card: #FFFFFF;
  --border: #E9E4FF;
  --text: #1A1625;
  --sidebar-bg: rgba(255, 255, 255, 0.8);
}

/* Dynamic Themes (Phase 6) */
[data-time='sunrise'] {
  --primary: #F59E0B;
  --primary-dark: #D97706;
  --primary-light: #FBBF24;
  --bg: #FFFBEB;
  --card: #FFFFFF;
  --border: #FEF3C7;
  --text: #78350F;
  --sidebar-bg: rgba(255, 251, 235, 0.8);
}

[data-time='sunset'] {
  --primary: #EA580C;
  --primary-dark: #C2410C;
  --primary-light: #FB923C;
  --bg: #FFF7ED;
  --card: #FFFFFF;
  --border: #FFEDD5;
  --text: #7C2D12;
  --sidebar-bg: rgba(255, 247, 237, 0.8);
}

/* Mood Themes (Phase 6+) - High Specificity Overrides */
html[data-mood='Radiant'] {
  --primary: #F59E0B;
  --bg: #FFFBEB;
  --border: #FEF3C7;
  --text: #78350F !important;
  --sidebar-bg: rgba(255, 251, 235, 0.9);
}

html[data-mood='Calmado'] {
  --primary: #3B82F6;
  --bg: #EFF6FF;
  --border: #DBEAFE;
  --text: #1E3A8A !important;
  --sidebar-bg: rgba(239, 246, 255, 0.9);
}

html[data-mood='Nublado'] {
  --primary: #6366F1;
  --bg: #F5F3FF;
  --border: #EDE9FE;
  --text: #4338CA !important;
  --sidebar-bg: rgba(245, 243, 255, 0.9);
}

html[data-mood='Lluvioso'] {
  --primary: #64748B;
  --bg: #F1F5F9;
  --border: #E2E8F0;
  --text: #1E293B !important;
  --sidebar-bg: rgba(241, 245, 249, 0.9);
}

html[data-mood='El√©ctrico'] {
  --primary: #8B5CF6;
  --bg: #FAF5FF;
  --border: #F3E8FF;
  --text: #581C87 !important;
  --sidebar-bg: rgba(250, 245, 255, 0.9);
}

[data-time='night'] {
  --primary: #818CF8;
  --primary-dark: #4F46E5;
  --primary-light: #A5B4FC;
  --bg: #020617;
  --card: #0F172A;
  --border: #1E293B;
  --text: #F1F5F9;
  --sidebar-bg: rgba(15, 23, 42, 0.8);
}

.dark {
  --primary: #A855F7;
  --primary-dark: #9333EA;
  --primary-light: #C084FC;
  --bg: #0F0D15;
  --card: #1C1926;
  --border: #2D293D;
  --text: #F4F3F9;
  --sidebar-bg: rgba(28, 25, 38, 0.8);
}

@layer base {

  html,
  body,
  #root {
    @apply min-h-screen;
  }

  body {
    @apply text-text font-sans m-0 p-0;
    background-color: var(--color-bg);
    font-family: 'Quicksand', sans-serif;
    transition: background-color 2s ease, color 2s ease, border-color 2s ease;
  }

  h1,
  h2,
  h3 {
    @apply m-0;
  }

  button {
    font-family: inherit;
  }
}

@layer components {
  #root {
    @apply w-full h-full;
  }

  /* Ensure smooth scrolling */
  * {
    scroll-behavior: smooth;
  }

  /* Reusable modal shell that stays visible beside desktop sidebar */
  .app-modal-overlay {
    position: fixed;
    inset: 0;
    z-index: 220;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem;
    background: rgb(2 6 23 / 0.45);
    backdrop-filter: blur(6px);
  }

  @media (min-width: 768px) {
    .app-modal-overlay {
      padding-left: calc(var(--sidebar-width) + 0.75rem);
      padding-right: 0.75rem;
    }
  }

  .app-modal-panel {
    max-height: calc(100vh - 1rem);
    overflow-y: auto;
    overflow-x: hidden;
  }

  /* Shared clarity shell */
  .app-page-shell {
    @apply max-w-7xl mx-auto;
  }

  .app-page-header {
    @apply rounded-3xl border border-gray-200 bg-white/95 p-4 md:p-5 shadow-sm;
  }

  .app-page-header-title {
    @apply text-2xl md:text-3xl font-black tracking-tight text-gray-900;
  }

  .app-page-header-subtitle {
    @apply mt-1 text-sm font-medium text-gray-600;
  }

  .app-sticky-frame {
    position: static;
  }

  .app-filter-chip {
    @apply inline-flex items-center gap-1.5 rounded-full border border-violet-200 bg-violet-50 px-3 py-1 text-xs font-bold text-violet-700;
  }

  .app-filter-chip-x {
    @apply inline-flex h-4 w-4 items-center justify-center rounded-full border border-violet-300 text-[10px] leading-none text-violet-700 hover:bg-violet-100;
  }

  .app-empty-card {
    @apply rounded-2xl border border-dashed border-gray-300 bg-gray-50/70 p-6 text-center text-sm text-gray-500 italic;
  }

  .app-table-wrap {
    @apply overflow-auto rounded-2xl border border-violet-100 bg-white shadow-sm;
    max-height: min(58vh, 620px);
  }

  .app-table {
    @apply min-w-full text-sm;
  }

  .app-table thead {
    position: static;
  }

  .app-table thead th {
    @apply bg-violet-50 text-violet-700;
  }

  .density-toggle {
    @apply inline-flex items-center gap-1.5 rounded-full border border-violet-200 bg-white px-2.5 py-1.5 text-[11px] font-bold text-violet-700 shadow-sm hover:bg-violet-50;
  }

  html[data-density='compact'] main {
    font-size: 14px;
  }

  html[data-density='compact'] .app-table td,
  html[data-density='compact'] .app-table th {
    padding-top: 0.25rem !important;
    padding-bottom: 0.25rem !important;
    font-size: 12px !important;
  }

  html[data-density='compact'] .compact-card {
    padding: 0.6rem !important;
  }

  html[data-density='compact'] .compact-gap {
    gap: 0.45rem !important;
  }
}
